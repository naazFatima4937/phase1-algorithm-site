<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Phase-1 Algorithm Tool (Real CSV Version)</title>

<style>
body{
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#e3f2fd,#fce4ec);
    margin:0;
    padding:40px 15px;
}
.container{
    max-width:820px;
    margin:auto;
    background:white;
    padding:30px;
    border-radius:14px;
    box-shadow:0 8px 25px rgba(0,0,0,0.15);
}
h1{text-align:center;margin-top:0}
label{font-weight:bold}
textarea,input,select,button{
    width:100%;
    padding:12px;
    margin-top:6px;
    margin-bottom:18px;
    border-radius:8px;
    border:1px solid #ccc;
    font-size:15px;
}
button{
    background:#1976d2;
    color:white;
    border:none;
    font-size:16px;
    cursor:pointer;
}
button:hover{background:#0d47a1}
.result{
    background:#f1f8ff;
    padding:18px;
    border-radius:10px;
    font-size:16px;
}
table{
    width:100%;
    border-collapse:collapse;
    margin-top:15px;
}
th,td{
    border:1px solid #ddd;
    padding:6px;
    font-size:13px;
}
th{background:#f3f3f3}
</style>

</head>

<body>

<div class="container">
<h1>Phase-1 Algorithm Tool (Real Dataset Version)</h1>

<label>Upload CSV File</label> <input type="file" id="csvFile" accept=".csv">

<div id="columnBox" style="display:none">
<label>Select Numeric Column</label>
<select id="columnSelect"></select>
</div>

<label>OR Enter Numbers Manually</label>

<textarea id="manualInput" placeholder="Example: 10,4,7,2,15,1"></textarea>

<label>Select Operation</label> <select id="operation">

<option value="merge">Merge Sort</option>
<option value="quick">Quick Sort</option>
<option value="binary">Binary Search</option>
<option value="maxmin">Find Max & Min</option>
</select>

<label>Binary Search Key</label> <input type="number" id="key" placeholder="Enter number to search">

<button onclick="processData()">Run Algorithm</button>

<h3>CSV Preview</h3>
<div id="tablePreview"></div>

<h3>Result</h3>
<div class="result" id="output">Waiting for input...</div>
</div>

<script>

let csvData=[];

// ---------- Parse CSV ----------
document.getElementById("csvFile").addEventListener("change",function(){
    let file=this.files[0];
    let reader=new FileReader();
    reader.onload=function(e){
        let rows=e.target.result.trim().split("\n").map(r=>r.split(","));
        csvData=rows;
        showTable(rows);
        populateColumns(rows);
    };
    reader.readAsText(file);
});

// ---------- Show Table Preview ----------
function showTable(rows){
    let html="<table>";
    rows.forEach((row,i)=>{
        html+="<tr>";
        row.forEach(cell=>{
            html+= i==0 ? `<th>${cell}</th>` : `<td>${cell}</td>`;
        });
        html+="</tr>";
    });
    html+="</table>";
    document.getElementById("tablePreview").innerHTML=html;
}

// ---------- Populate Numeric Columns ----------
function populateColumns(rows){
    let select=document.getElementById("columnSelect");
    select.innerHTML="";
    let headers=rows[0];

    headers.forEach((h,i)=>{
        let numeric=true;
        for(let r=1;r<rows.length;r++){
            if(isNaN(parseFloat(rows[r][i]))) numeric=false;
        }
        if(numeric){
            let opt=document.createElement("option");
            opt.value=i;
            opt.text=h;
            select.appendChild(opt);
        }
    });

    if(select.options.length>0)
        document.getElementById("columnBox").style.display="block";
}

// ---------- Algorithms ----------
function mergeSort(arr){
    if(arr.length<=1) return arr;
    let mid=Math.floor(arr.length/2);
    return merge(mergeSort(arr.slice(0,mid)), mergeSort(arr.slice(mid)));
}
function merge(left,right){
    let res=[];
    while(left.length && right.length){
        res.push(left[0]<right[0]?left.shift():right.shift());
    }
    return res.concat(left,right);
}
function quickSort(arr){
    if(arr.length<=1) return arr;
    let pivot=arr[0];
    let left=arr.slice(1).filter(x=>x<=pivot);
    let right=arr.slice(1).filter(x=>x>pivot);
    return [...quickSort(left),pivot,...quickSort(right)];
}
function binarySearch(arr,key){
    let low=0,high=arr.length-1;
    while(low<=high){
        let mid=Math.floor((low+high)/2);
        if(arr[mid]==key) return mid;
        if(arr[mid]<key) low=mid+1;
        else high=mid-1;
    }
    return -1;
}

// ---------- Process ----------
function processData(){

    let operation=document.getElementById("operation").value;
    let key=parseFloat(document.getElementById("key").value);
    let manual=document.getElementById("manualInput").value;

    let data=[];

    // If CSV uploaded
    if(csvData.length){
        let col=parseInt(document.getElementById("columnSelect").value);
        for(let i=1;i<csvData.length;i++){
            let val=parseFloat(csvData[i][col]);
            if(!isNaN(val)) data.push(val);
        }
    }

    // If manual input used instead
    else if(manual.trim()!==""){
        data=manual.split(",").map(x=>parseFloat(x)).filter(x=>!isNaN(x));
    }

    if(!data.length){
        alert("No numeric data found.");
        return;
    }

    let result="";

    if(operation==="merge")
        result="Merge Sorted: "+mergeSort([...data]).join(", ");
    else if(operation==="quick")
        result="Quick Sorted: "+quickSort([...data]).join(", ");
    else if(operation==="maxmin")
        result="Max = "+Math.max(...data)+" | Min = "+Math.min(...data);
    else if(operation==="binary"){
        let sorted=[...data].sort((a,b)=>a-b);
        let pos=binarySearch(sorted,key);
        result="Sorted: "+sorted.join(", ")+" | Position: "+pos;
    }

    document.getElementById("output").innerText=result;
}
</script>

</body>
</html>
